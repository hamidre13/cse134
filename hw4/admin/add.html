<!doctype htmnl>
<html lang="en">
<head>
	<meta charset="utf-8">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
       
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>

<body>

<header>
<nav >
	<ul>
<li><a href="index.html">View all tags</a></li>
</ul>
</nav>
</header>
<main class="container-fluid">
<div class="row">
<label> Tag</label>
<input type="text" id="tagName"><br>	
</div>
<div class="row">
<label for="tagTitle" class="col-md-1">Tag Title : </label>
<input type="text" id="tagTitle" class="col-md-4"><br>
</div>
<section class="row">
<label for="tagDefenition"> Defeniton</label>
<textarea name="editor1" id="editor1" rows="10" cols="50" placeholder="Tag defenition goes here.">
</textarea>
<label>Syntax</label>
<textarea id="syntax" placeholder="Write the generic tag syntax here"></textarea>
</section>
<section class="row" id="attrs">
		<input type="text" id="attrName0" placeholder = "Attr name ">
		<input type="text" id="attrDefenition0" placeholder = "Attr defenition">
</section>
<button onclick="new_attr()"> Add new attr</button>
<section class="row">
	<h3>Browser compatibality</h3>
	<label> Google chrome</label>
	<textarea id="chromeAttr"> 
	</textarea>
	<label> Fire Fox</label>
	<textarea id="fireFoxAttr"> 
	</textarea>
	<label> Safari</label>
	<textarea id="safariAttr"> 
	</textarea>
	<label> Ie</label>
	<textarea id="ieAttr"> 
	</textarea>
	<label> Opera</label>
	<textarea id="operaAttr"> 
	</textarea>
</section>
<section>
	<label> Example</label>
	<textarea id="exampleTxt" placeholder="Write tag example here.">
	</textarea>
</section>
<section id="relatedTagsSection">
	<label id="relatedLabel0">Related tag0 : </label>
	<input type="text" id="relatedTag0">
</section>
<button onclick="new_related()"> New tag</button>
<button onclick="set_data()"> Submit</button>
</main>
<!-- Ck editor -->
<script src="//cdn.ckeditor.com/4.5.1/standard/ckeditor.js"></script>
<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="https://cdn.firebase.com/js/client/2.2.7/firebase.js"></script>
<script type="text/javascript">
var databaseRef = new Firebase("https://cse134.firebaseio.com/");
function set_data() {
var attrs = {};
for (var i = 0; i < attrCounter+1; i++) {
	if (document.getElementById("attrName"+i).value != "") {
		attrs[document.getElementById("attrName"+i).value ] = document.getElementById("attrDefenition"+i).value
	};
};
var tags = [];
for (var i=0;i<relatedCounter+1;i++) {
	if(document.getElementById("relatedTag"+i).value != 0) {
		tags.push(document.getElementById("relatedTag"+i).value);
	}
}
databaseRef.child("tags").child(document.getElementById("tagName").value).set({
	 tagName       : document.getElementById("tagName").value,
	 tagTitle      : document.getElementById("tagTitle").value,
	 tagDefenition : document.getElementById("editor1").value,
	 chrome        : document.getElementById("chromeAttr").value,
	 safari        : document.getElementById("safariAttr").value,
	 ie            : document.getElementById("ieAttr").value,
	 fireFox       : document.getElementById("fireFoxAttr").value,
	 opera         : document.getElementById("operaAttr").value,
	 example       : document.getElementById("exampleTxt").value,
	 syntax        : document.getElementById("syntax").value,
	 attrs         : attrs,
	 relatedTags   : tags
},function(error) {
	if (error) {
    alert("Data could not be saved." + error);
  } else {
    alert("Data saved successfully.");
  }
});

}
var attrCounter = 0;
function new_attr () {
	var clonedAttrName       = document.getElementById("attrName0").cloneNode(false);
	var clonedAttrDefenition = document.getElementById("attrDefenition0").cloneNode(false);
	attrCounter ++;
	clonedAttrName.id       = "attrName"+attrCounter;
	clonedAttrDefenition.id = "attrDefenition"+attrCounter;
	clonedAttrName.value = "";
	clonedAttrDefenition.value = "";
	var breakNode = document.createElement("br");
	document.getElementById("attrs").appendChild(breakNode);
	document.getElementById("attrs").appendChild(clonedAttrName);
	document.getElementById("attrs").appendChild(clonedAttrDefenition);
}
var relatedCounter = 0;
function new_related() {
	var clonedRelatedLabel = document.getElementById("relatedLabel0").cloneNode(true);
	var clonedRelatedTag   = document.getElementById("relatedTag0").cloneNode(true);
	relatedCounter ++;
	clonedRelatedLabel.innerHTML = "Related tag" +relatedCounter+" : ";
	clonedRelatedLabel.id = "relatedLabel"+relatedCounter;
	clonedRelatedTag.id   = "relatedTag"+relatedCounter;
	clonedRelatedTag.value = "";
	var breakNode = document.createElement("br");
	document.getElementById("relatedTagsSection").appendChild(breakNode);
	document.getElementById("relatedTagsSection").appendChild(clonedRelatedLabel);
	document.getElementById("relatedTagsSection").appendChild(clonedRelatedTag);
}
	CKEDITOR.replace( 'editor1');
	CKEDITOR.replace( 'chromeAttr');
	CKEDITOR.replace( 'fireFoxAttr');
	CKEDITOR.replace( 'safariAttr');
	CKEDITOR.replace( 'ieAttr');
	CKEDITOR.replace( 'operaAttr');
</script>
</body>
</html>

